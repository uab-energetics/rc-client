<nav class="site-navbar navbar navbar-default navbar-inverse navbar-fixed-top navbar-mega"
     role="navigation">

  <div class="navbar-header">

    <button class="navbar-toggler hamburger hamburger-close" (click)="toggleSidebar()">
      <span class="hamburger-bar"></span>
    </button>

  </div>

  <div class="navbar-container container-fluid">
    <!-- Navbar Collapse -->
    <div class="collapse navbar-collapse navbar-collapse-toolbar" id="site-navbar-collapse">
      <!-- Navbar Toolbar -->
      <ul class="nav navbar-toolbar">

        <li class="nav-item hidden-float" id="toggleMenubar">
          <a (click)="toggleSidebar()" class="nav-link" data-toggle="menubar" href="javascript:void(0)" role="button">
            <i class="icon hamburger hamburger-arrow-left">
              <span class="sr-only">Toggle menubar</span>
              <span class="hamburger-bar"></span>
            </i>
          </a>
        </li>


        <li *ngIf="activeProject" class="nav-item ml-15">
          <a class="nav-link link" (click)="showProjects()">
            <i class="icon fa-x2 fa-pie-chart"></i> &nbsp;
            <b>{{activeProject?.name}}</b> &nbsp;
            <i class="icon wb-chevron-down-mini"></i>
          </a>
        </li>

        <li *ngIf="!activeProject" class="nav-item ml-15">
          <a class="nav-link link" (click)="showProjects()">
            <i class="icon fa-pie-chart"></i> &nbsp;
            <b>Select a Project</b> &nbsp;
            <i class="icon wb-chevron-down-mini"></i>
          </a>
        </li>

      </ul>
      <!-- End Navbar Toolbar -->

      <!-- Navbar Toolbar Right -->
      <ul class="nav navbar-toolbar navbar-right navbar-toolbar-right">


        <!-- NOTIFICATIONS
          ============================== -->

        <li class="nav-item dropdown">
          <a class="nav-link" data-toggle="dropdown" href="javascript:void(0)" title="Notifications"
             aria-expanded="false" data-animation="scale-up" role="button">
            <i class="icon wb-bell" aria-hidden="true"></i>
            <span *ngIf="unreadNotifications.length > 0" class="badge badge-pill badge-danger up">{{unreadNotifications.length}}</span>
          </a>
          <div class="dropdown-menu dropdown-menu-right dropdown-menu-media" >
            <div class="dropdown-menu-header">
              <h5>NOTIFICATIONS</h5>
              <span class="badge badge-round badge-danger">New {{unreadNotifications.length}}</span>
            </div>

            <div class="list-group">
              <div data-role="container">
                <div data-role="content">



                  <a *ngFor="let notification of unreadNotifications"
                     [routerLink]="['/projects']"
                     class="list-group-item dropdown-item">

                    <div class="media">
                      <div class="pr-10">
                        <i class="icon wb-book bg-primary-600 white icon-circle" aria-hidden="true"></i>
                      </div>
                      <div class="media-body">
                        <h6 class="media-heading">
                          You've been granted access <br/>
                          to a research Project!
                        </h6>
                        <time class="media-meta">{{notification.created_at}}</time>
                      </div>
                    </div>


                  </a>

                  <a *ngIf="unreadNotifications.length === 0" class="list-group-item dropdown-item">
                    <div class="media">
                      <div class="media-body">
                        <h6 class="media-heading">
                          <em>Nothing to see here</em>
                        </h6>
                      </div>
                    </div>
                  </a>



                </div>
              </div>
            </div>
            <div class="dropdown-menu-footer">
              <!--<a class="dropdown-menu-footer-btn" href="javascript:void(0)" role="button">
                <i class="icon wb-settings" aria-hidden="true"></i>
              </a>-->
              <a class="dropdown-item" (click)="dismissNotifications()" href="javascript:void(0)">
                Dismiss Notifications
              </a>
            </div>
          </div>
        </li>


        <li class="nav-item dropdown">
          <a class="nav-link" data-toggle="dropdown" href="javascript:void(0)" data-animation="scale-up"
             aria-expanded="false" role="button">
            <span class="icon wb-plus"></span> &nbsp; <i class="icon wb-chevron-down-mini"></i>
          </a>
          <div class="dropdown-menu" role="menu">
            <a [routerLink]="'/create-project'" class="dropdown-item" role="menuitem">
              <span class="icon wb-book"></span> New Project</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link navbar-avatar" data-toggle="dropdown" href="javascript:void(0)" aria-expanded="false"
             data-animation="scale-up" role="button">
                <span class="avatar avatar-online">
                  <img [src]="(authService.user | async).image" alt="user image">
                </span>
            &nbsp; <i class="icon wb-chevron-down-mini"></i>
          </a>
          <div class="dropdown-menu" role="menu">
            <a class="dropdown-item" [routerLink]="'/settings/profile'" role="menuitem"><i class="icon wb-user" aria-hidden="true"></i> Profile</a>
            <a class="dropdown-item" [routerLink]="'/settings'" role="menuitem"><i class="icon wb-settings" aria-hidden="true"></i> Settings</a>
            <div class="dropdown-divider" role="presentation"></div>
            <a (click)="authService.logout()" class="dropdown-item" href="javascript:void(0)" role="menuitem">
              <i class="icon wb-power"></i> Logout</a>
          </div>
        </li>
      </ul>
      <!-- End Navbar Toolbar Right -->

      <div class="navbar-brand navbar-brand-center">
        <a (click)="navigateHome()">
          <img class="navbar-brand-logo"
               src="../../../../assets/images/UAB-logo-white.png" title="UAB Research Coder">
        </a>
      </div>

    </div>
    <!-- End Navbar Collapse -->

  </div>
</nav>
