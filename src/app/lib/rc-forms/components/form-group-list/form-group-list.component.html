<!-- If it is not a ListGroup, pass down the hierarchy -->
<rc-form-group
  *ngIf="spec.type !== 'group-list'"
  [spec]="spec"
  [key]="key"
  [data]="data"
  (formInput)="formInput.emit($event)">
</rc-form-group>

<!-- ListGroup component -->
<div *ngIf="spec.type === 'group-list'">
  <h4>{{spec.title}}</h4>
  <h6>{{spec.prompt}}</h6>

  <button (click)="listItemAdd()" mat-raised-button color="primary" class="mb-15">
    <i class="icon wb-plus"></i> Add One</button>

  <mat-accordion [multi]="true">
    <mat-expansion-panel
      *ngFor="let listItem of listItems"
      [expanded]="data[listItem.label]?.expanded"
      (opened)="setPanelState(listItem.label, true)"
      (closed)="setPanelState(listItem.label, false)">

      <!-- Item Header -->
      <mat-expansion-panel-header style="background: #c3e8ff">
        <mat-panel-title>{{listItem.label}}</mat-panel-title>
      </mat-expansion-panel-header>

      <!-- Label Controls -->
      <div class="mt-15">
        <button (click)="listItemEdit(listItem.label)" class="btn btn-xs btn-warning mr-15">Edit Item Label</button>
        <button (click)="listItemDelete(listItem.label)" class="btn btn-xs btn-danger">Delete This Item</button>
      </div>

      <!-- Outlets for next component -->
      <rc-form-group
        [spec]="spec.listItem"
        [key]="listItem.label + '.data'"
        [data]="getChildData(listItem.label + '.data')"
        (formInput)="childInputStream$.next($event)">
      </rc-form-group>

    </mat-expansion-panel>
  </mat-accordion>
</div>
