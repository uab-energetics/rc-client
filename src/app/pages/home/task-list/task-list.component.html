<div class="container mt-2">
  <p><mat-progress-bar mode="indeterminate" *ngIf="loading > 0"></mat-progress-bar></p>

  <button class="btn btn-success" (click)="openModal(modal)"><i class="icon wb-plus"></i> Find Tasks </button>

  <br/>
  <br/>

  <div *ngIf="encodings">
    <table *ngIf="encodings.length > 0" class="table">
      <thead>
      <tr>
        <th>#</th>
        <th>Form Name</th>
        <th>Publication</th>
        <!--<th>Progress</th>-->
        <th>Status</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let task of encodings">
        <th scope="row">{{task.id}}</th>
        <td>{{task.form?.name}}</td>
        <td style="max-width: 300px">{{task.publication?.name}}</td>
        <!--<td>
          <p><ngb-progressbar type="warning" [value]="task.completion" [striped]="true" [animated]="true"><i>{{task.completion}}%</i></ngb-progressbar></p>
        </td>-->
        <td><span class="badge badge-success">Clean</span></td>
        <td>

          <div class="dropdown">
            <button data-toggle="dropdown" class="btn btn-primary" >
              Actions
              <i class="icon wb-chevron-down-mini"></i>
            </button>
            <div class="dropdown-menu dropdown-menu-right">
              <a [routerLink]="['/pub-coder', task.id]" class="dropdown-item">
                <i class="icon wb-pencil"></i>
                Continue
              </a>
              <a [routerLink]="['/conflicts', task.id]" class="dropdown-item">
                <i class="icon wb-users"></i>
                Conflict Report
              </a>
              <div class="dropdown-divider"></div>
              <a (click)="onQuitEncoding(task)" class="dropdown-item" href="javascript:void(0)">
                <i class="icon wb-trash"></i> Quit</a>
            </div>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
    <h3 *ngIf="encodings.length === 0">Nothing here yet. <a (click)="openModal(modal)" href="javascript:void(0)">Find a task</a> to get started. </h3>
  </div>

  <ng-template #modal let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title">Find Tasks</h4>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <!--<mat-progress-bar mode="indeterminate" *ngIf="showLoader"></mat-progress-bar>-->
      <app-find-task #taskFormComp></app-find-task>
    </div>
    <div class="modal-footer">
      <button
        [disabled]="taskFormComp.taskForm.status==='INVALID'"
        (click)="onTaskFormSubmit(taskFormComp.exportForm())"
        class="btn btn-success float-right">+ Assign</button>
    </div>
  </ng-template>

</div>
